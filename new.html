<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>평점 계산기</title>
<link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard-dynamic-subset.min.css" />
</head>
<body>
    <style> /** base */
        * {
            text-decoration: none;
            color: inherit;
            font-family: "Pretendard";
            box-sizing: border-box;
        }
        main > * {
            width: 94vw;
            height: max-content;
            
            margin: 2vw;
            padding: 1vw;

            border-radius: 1vw;
            background-color: #dddddd;
        }
        main > * > h1 {
            text-align: center;
        }
        main > a {
            display: block;
            font-weight: 900;
            font-size: 2vw;
        }
    </style>
    <style> /** resultGrid */
        .resultGrid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            font-size: 2vw;
            gap: 1vw;
        }
        .resultGrid > * {
            text-align: center;
        }
        .resultGrid .index, #calResult1, #calResult2 {
            font-weight: 700;
        }
        .resultGrid select {
            font-size: inherit;
            font-weight: inherit;
            text-align: center;

            border: none;
            outline: none;
        }
        .resultGrid option {
            font-size: 1vw;
        }
    </style>
    <style> /** inputGrid */
        .inputGrid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1vw;
        }
        .inputGrid > * {
            width: 100%;
            text-align: center;
            font-size: 2vw;
        }
        .inputGrid input {
            font-weight: inherit;

            border: none;
            outline: none;        
        }
        .inputGrid .inputHead {
            font-weight: 700;
        }
    </style>
    <style> /** InfoDiv */
        .overFlowDiv {
            overflow: scroll hidden;
        }
        .pointLev {
            width: max-content;
            
            text-align: center;

            font-size: 2vw;
            font-weight: 500;

            border-collapse: collapse;
        }
        .pointLev td {
            width: max-content;
            padding: 1vw;
            border-right: black 1px solid;
        }
        .pointLev td:last-child {
            border: none;
        }
    </style>
    <main>
        <a href="../index.html ">SASA 10th 평점 계산기(24-1)</a>
        <div class="resultGrid">
            <div class="index" style="grid-column-start: 1; grid-column-end: 3;">전체 평점 평균 확인하기</div>
            <div class="index" id="allCredit">0점</div>
            <input type="submit" value="입력한 내용 적용하기" onclick="updateCredit()">
        </div>
        <div class="resultGrid">
            <div class="index" style="grid-column-start: 1; grid-column-end: 3;">〈 
            <select oninput="resetSubj()" id="subjSelect">
                <option value="math1">수학 Ⅰ</option>
                <option value="math2">수학 Ⅱ</option>
                <option value="phys">물리학 및 실험 Ⅰ</option>
                <option value="chem">화학 및 실험 Ⅰ</option>
                <option value="life">생명과학 및 실험 Ⅰ</option>
                <option value="earth">지구과학 및 실험 Ⅰ</option>
                <option value="info">정보과학개론</option>
                <option value="kor">국어 Ⅰ</option>
                <option value="eng">영어 Ⅰ</option>
                <option value="hist">한국사 Ⅰ</option>
                <option value="pe">체육 Ⅰ</option>
                <option value="music">음악 Ⅰ</option>
            </select>
             〉</div>
            <div class="index">
                현재 원점수
            </div>
            <div id="curPointEl">
                0
            </div>
            <div class="index">
                현재 성적 등급
            </div>
            <div id="curGradeEl">
                F
            </div>
            <div class="index">
                현재 평점
            </div>
            <div id="curCreditEl">
                0
            </div>
            <div class="index" style="grid-column-start: 1; grid-column-end: 3;">
                <select id="goalSelect" oninput="updateFunc(-1)">
                    <option value="90">A+</option>
                    <option value="85">A0</option>
                    <option value="80">A-</option>
                    <option value="75">B+</option>
                    <option value="70">B0</option>
                    <option value="65">B-</option>
                    <option value="60">C+</option>
                    <option value="55">C0</option>
                    <option value="50">C-</option>
                    <option value="45">D+</option>
                    <option value="40">D0</option>
                    <option value="35">D-</option>
                </select>까지
            </div>
            <div id="calResult1">원점수 ?점</div>
            <div id="calResult2">지필고사 ?점</div>
        </div>
        <div class="inputGrid" id="inputGrid">
        </div>
        <div class="InfoGrid">
            <h1 class="title">원점수, 성적 등급과 평점 표</h1>
            <div class="overFlowDiv">
                <table class="pointLev">
                    <tbody>
                        <tr>
                            <td>원점수</td>
                            <td>90 ~ 100</td>
                            <td>85 ~ 90</td>
                            <td>80 ~ 85</td>
                            <td>75 ~ 80</td>
                            <td>70 ~ 75</td>
                            <td>65 ~ 70</td>
                            <td>60 ~ 65</td>
                            <td>55 ~ 60</td>
                            <td>50 ~ 55</td>
                            <td>45 ~ 50</td>
                            <td>40 ~ 45</td>
                            <td>35 ~ 40</td>
                            <td>~ 35</td>
                        </tr>
                        <tr>
                            <td>성적 등급</td>
                            <td>A+</td>
                            <td>A0</td>
                            <td>A-</td>
                            <td>B+</td>
                            <td>B0</td>
                            <td>B-</td>
                            <td>C+</td>
                            <td>C0</td>
                            <td>C-</td>
                            <td>D+</td>
                            <td>D0</td>
                            <td>D-</td>
                            <td>F</td>
                        </tr>
                        <tr>
                            <td>평점</td>
                            <td>4.3</td>
                            <td>4.0</td>
                            <td>3.7</td>
                            <td>3.3</td>
                            <td>3.0</td>
                            <td>2.7</td>
                            <td>2.3</td>
                            <td>2.0</td>
                            <td>1.7</td>
                            <td>1.3</td>
                            <td>1.0</td>
                            <td>0.7</td>
                            <td>0.0</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </main>
    <script id="data">
        let data = {
    "math1" : {
        "name": "수학1",
        "count": 4,
        "examRate": 0.3,
        "isPF": false,
        "list": [
            {"value": 0, "rate": 0.3, "maxPoint": 100, "name": "1회고사(30%)"},
            {"value": 0, "rate": 0.3, "maxPoint": 100, "name": "2회고사(30%)"},
            {"value": 0, "rate": 1,   "maxPoint": 30,  "name": "문제해결"},
            {"value": 0, "rate": 1,   "maxPoint": 10,  "name": "수학적 의사소통"}
        ],
        "credit": 0
    },
    "math2" : {
        "name": "수학 Ⅱ",
        "count": 5,
        "examRate": 0.3,
        "isPF": false,
        "list": [
            {"value": 0, "rate": 0.3, "maxPoint": 100, "name": "1회고사(30%)"},
            {"value": 0, "rate": 0.3, "maxPoint": 100, "name": "2회고사(30%)"},
            {"value": 0, "rate": 1, "maxPoint": 10, "name": "수학문제만들기"},
            {"value": 0, "rate": 1, "maxPoint": 10, "name": "수학블로그만들기"},
            {"value": 0, "rate": 1, "maxPoint": 20, "name": "주제보고서작성"}
        ],
        "credit": 0
    },
    "phys" : {
        "name": "물리학 및 실험 Ⅰ",
        "count": 6,
        "examRate": 0.3,
        "isPF": false,
        "list": [
            {"value": 0, "rate": 0.3, "maxPoint": 100, "name": "1회고사(30%)"},
            {"value": 0, "rate": 0.3, "maxPoint": 100, "name": "2회고사(30%)"},
            {"value": 0, "rate": 1, "maxPoint": 10, "name": "실험보고서"},
            {"value": 0, "rate": 1, "maxPoint": 10, "name": "탐구보고서"},
            {"value": 0, "rate": 1, "maxPoint": 10, "name": "창의적 문제해결"},
            {"value": 0, "rate": 1, "maxPoint": 10, "name": "연습"}
        ],
        "credit": 0
    },
    "chem" : {
        "name": "화학 및 실험 Ⅰ",
        "count": 8,
        "examRate": 0.3,
        "isPF": false,
        "list": [
            {"value": 0, "rate": 0.3, "maxPoint": 100, "name": "1회고사(30%)"},
            {"value": 0, "rate": 0.3, "maxPoint": 100, "name": "2회고사(30%)"},
            {"value": 0, "rate": 1, "maxPoint": 10, "name": "퀴즈"},
            {"value": 0, "rate": 1, "maxPoint": 5, "name": "발표1"},
            {"value": 0, "rate": 1, "maxPoint": 5, "name": "발표2"},
            {"value": 0, "rate": 1, "maxPoint": 8, "name": "UV/Vis 기기 활용"},
            {"value": 0, "rate": 1, "maxPoint": 8, "name": "IR 기기 활용"},
            {"value": 0, "rate": 1, "maxPoint": 4, "name": "학습참여도"}
        ],
        "credit": 0
    },
    "life" : {
        "name": "생명과학 및 실험 Ⅰ",
        "count": 4,
        "examRate": 0.3,
        "isPF": false,
        "list": [
            {"value": 0, "rate": 0.3, "maxPoint": 100, "name": "1회고사(30%)"},
            {"value": 0, "rate": 0.3, "maxPoint": 100, "name": "2회고사(30%)"},
            {"value": 0, "rate": 1, "maxPoint": 20, "name": "실험1"},
            {"value": 0, "rate": 1, "maxPoint": 20, "name": "실험2"}
        ],
        "credit": 0
    },
    "earth" : {
        "name": "지구과학 및 실험 Ⅰ",
        "count": 4,
        "examRate": 0.3,
        "isPF": false,
        "list": [
            {"value": 0, "rate": 0.3, "maxPoint": 100, "name": "1회고사(30%)"},
            {"value": 0, "rate": 0.3, "maxPoint": 100, "name": "2회고사(30%)"},
            {"value": 0, "rate": 1, "maxPoint": 20, "name": "단열선도 작성 및 해석"},
            {"value": 0, "rate": 1, "maxPoint": 20, "name": "천체망원경 실습"}
        ],
        "credit": 0
    },
    "info" : {
        "name": "정보과학개론",
        "count": 6,
        "examRate": 0.25,
        "isPF": false,
        "list": [
            {"value": 0, "rate": 0.25, "maxPoint": 100, "name": "1회고사(25%)"},
            {"value": 0, "rate": 0.25, "maxPoint": 100, "name": "2회고사(25%)"},
            {"value": 0, "rate": 1, "maxPoint": 10, "name": "학습활동"},
            {"value": 0, "rate": 1, "maxPoint": 10, "name": "보고서"},
            {"value": 0, "rate": 1, "maxPoint": 15, "name": "연습문제"},
            {"value": 0, "rate": 1, "maxPoint": 15, "name": "퀴즈"}
        ],
        "credit": 0
    },
    "hist" : {
        "name": "한국사 Ⅰ",
        "count": 5,
        "examRate": 0.35,
        "isPF": false,
        "list": [
            {"value": 0, "rate": 0.35, "maxPoint": 100, "name": "2회고사(35%)"},
            {"value": 0, "rate": 1, "maxPoint": 20, "name": "한국사 주제별 발표"},
            {"value": 0, "rate": 1, "maxPoint": 10, "name": "발표자료 제작"},
            {"value": 0, "rate": 1, "maxPoint": 20, "name": "역사 탐구보고서"},
            {"value": 0, "rate": 1, "maxPoint": 15, "name": "역사 포트폴리오"}
        ],
        "credit": 0
    },
    "eng" : {
        "name": "영어 Ⅰ",
        "count": 5,
        "examRate": 0.4,
        "isPF": false,
        "list": [
            {"value": 0, "rate": 0.4, "maxPoint": 100, "name": "2회고사(40%)"},
            {"value": 0, "rate": 1, "maxPoint": 15, "name": "Task Portfolio"},
            {"value": 0, "rate": 1, "maxPoint": 20, "name": "Dictogloss"},
            {"value": 0, "rate": 1, "maxPoint": 10, "name": "Interview"},
            {"value": 0, "rate": 1, "maxPoint": 15, "name": "Writing"}
        ],
        "credit": 0
    },
    "kor" : {
        "name": "국어 Ⅰ",
        "count": 4,
        "examRate": 0,
        "isPF": false,
        "list": [
            {"value": 0, "rate": 1, "maxPoint": 30, "name": "우리글 바로 쓰기"},
            {"value": 0, "rate": 1, "maxPoint": 35, "name": "생활글 쓰기"},
            {"value": 0, "rate": 1, "maxPoint": 15, "name": "발표"},
            {"value": 0, "rate": 1, "maxPoint": 20, "name": "주제 통합 읽기"}
        ],
        "credit": 0
    },
    "music" : {
        "name": "음악",
        "count": 3,
        "examRate": 0,
        "isPF": false,
        "list": [
            {"value": 0, "rate": 1, "maxPoint": 35, "name": "노래 부르기"},
            {"value": 0, "rate": 1, "maxPoint": 30, "name": "악기 연주하기"},
            {"value": 0, "rate": 1, "maxPoint": 35, "name": "소리 창작하기"}
        ],
        "credit": 0
    },
    "pe" : {
        "name": "체육 Ⅰ",
        "count": 4,
        "examRate": 0,
        "isPF": true,
        "list": [
            {"value": 0, "rate": 1, "maxPoint": 20, "name": "건강영역"},
            {"value": 0, "rate": 1, "maxPoint": 30, "name": "경쟁영역(경기1)"},
            {"value": 0, "rate": 1, "maxPoint": 30, "name": "경쟁영역(경기1)"},
            {"value": 0, "rate": 1, "maxPoint": 20, "name": "스포츠맨십(참여도)"}
        ],
        "credit": 0
    }
}
    </script>
    <script>
        let subjID = "math1";

        var examMaxPoint = 0;
        var curPoint = 0;
        var curGrade = "F";
        var curCredit = 0;
        var curPointEl = document.getElementById("curPointEl")
        var curGradeEl = document.getElementById("curGradeEl")
        var curCreditEl = document.getElementById("curCreditEl")
        var calResult1El = document.getElementById("calResult1")
        var calResult2El = document.getElementById("calResult2")
        var goalSelectEl = document.getElementById("goalSelect")
        var allCreditEl = document.getElementById("allCredit")

        function resetSubj() {
            data[subjID].credit = curCredit;

            curPoint = 0;
            curGrade = "F";
            curCredit = 0;
            subjID = document.getElementById("subjSelect").value;
            var elText = `<div class="inputHead">평가구분</div>
            <div class="inputHead">배점</div>
            <div class="inputHead">득점</div>`;
            for(i in data[subjID].list) {
                elText += `
                <div>${data[subjID].list[i].name}</div>
                <div>${data[subjID].list[i].maxPoint}</div>
                <input type="number" id="${i}thEl" value=${data[subjID].list[i].value} min=-1 max=${data[subjID].list[i].maxPoint+1} step=1 oninput="updateFunc(${i})"/>`
            }
            var inputGridEl = document.getElementById("inputGrid");
            inputGridEl.innerHTML = elText;

            calResult1El.style.gridColumnStart=1;
            if(data[subjID].examRate) {
                calResult1El.style.gridColumnEnd=2;
                calResult2El.style.display="block";
            } else {
                calResult1El.style.gridColumnEnd=3;
                calResult2El.style.display="none";
            }

            examMaxPoint = 100*data[subjID].examRate;
            updateFunc(-1);
        }
        
        function updateFunc(index) {
            if(index != -1) {
                inputValue = document.getElementById(`${index}thEl`).value;
                if(inputValue > data[subjID].list[index].maxPoint) {
                    document.getElementById(`${index}thEl`).value = 0;
                }
                else if(inputValue < 0) {
                    document.getElementById(`${index}thEl`).value = data[subjID].list[index].maxPoint;
                }
                data[subjID].list[index].value = Number(document.getElementById(`${index}thEl`).value);
                curPoint = 0;
                for(i in data[subjID].list) {
                    curPoint += data[subjID].list[i].value*data[subjID].list[i].rate;
                }
            }
            if(data[subjID].isPF) {
                if(curPoint >= 59.5) {curGrade = 'P'; curCredit="-"}
                else {curGrade = 'F'; curCredit="-"}
            } else {
                if(curPoint >= 89.5) {curGrade = 'A+'; curCredit=4.3}
                else if(curPoint >= 84.5) {curGrade = 'A0'; curCredit=4.0}
                else if(curPoint >= 79.5) {curGrade = 'A-'; curCredit=3.7}
                else if(curPoint >= 74.5) {curGrade = 'B+'; curCredit=3.3}
                else if(curPoint >= 69.5) {curGrade = 'B0'; curCredit=3.0}
                else if(curPoint >= 64.5) {curGrade = 'B-'; curCredit=2.7}
                else if(curPoint >= 59.5) {curGrade = 'C+'; curCredit=2.3}
                else if(curPoint >= 54.5) {curGrade = 'C0'; curCredit=2.0}
                else if(curPoint >= 49.5) {curGrade = 'C-'; curCredit=1.7}
                else if(curPoint >= 44.5) {curGrade = 'D+'; curCredit=1.3}
                else if(curPoint >= 39.5) {curGrade = 'D0'; curCredit=1.0}
                else if(curPoint >= 34.5) {curGrade = 'D-'; curCredit=0.7}
                else {curGrade = 'F'; curCredit=0.0}
            }

            curPointEl.innerHTML = curPoint;
            curGradeEl.innerHTML = curGrade;
            curCreditEl.innerHTML = curCredit;
            calResult1El.innerHTML = `원점수 ${-1 * (curPoint - goalSelectEl.value + 0.5)}점`
            calResult2El.innerHTML = `지필평가 ${-1 * (curPoint - goalSelectEl.value + 0.5)/examMaxPoint*100}점`
            data[subjID].credit = curCredit=='-'?0:curCredit;
        };

        resetSubj("chem");

        function updateCredit() {
            creditSum = 0;
            for(i in data) {
                creditSum += data[i].credit;
                console.log(data[i].credit)
            }
            allCreditEl.innerHTML = `${creditSum/11}점`
        }
    </script>
</body>
</html>